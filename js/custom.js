function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big";let o=document.querySelector("body");o.appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(l=>{if(l.target.classList&&(l.target.classList.value,1)){let c=l.target;c.addEventListener("contextmenu",(e=>e.preventDefault())),c.addEventListener("mouseover",(l=>{"IMG"==l.target.tagName&&e&&(e=0,t=setTimeout((()=>{let e=3*l.path[0].clientHeight,t=3*l.path[0].clientWidth,c=l.x-l.offsetX-(t-l.path[0].clientWidth)/2;c+t>o.clientWidth&&(c-=c+t-o.clientWidth+10),c<0&&(c=10);let a=l.y-l.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=c+"px",n.style.top=a+"px",n.style.display="flex",n.innerHTML=`<img src="${l.target.src}">`}),300))})),c.addEventListener("mouseout",(o=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}function PublicSacrificeDay(){var e=new Array("0403","0404","0405","0406","0414","0512","0707","0807","0814","0909","0918","0930","1025","1213"),t=new Date,n="",o=t.getMonth()+1;return t.getMonth()>9?n+=o:n+="0"+o,t.getDate()>9?n+=t.getDate():n+="0"+t.getDate(),e.indexOf(n)>-1?1:0}function percent(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#go-up");n<=95?(o.childNodes[0].style.display="none",o.childNodes[1].style.display="block",o.childNodes[1].innerHTML=n):(o.childNodes[1].style.display="none",o.childNodes[0].style.display="block")}function tagsBarActive(){var e=window.location.pathname;if("/"==(e=decodeURIComponent(e)))document.querySelector("#tags-bar")&&document.getElementById("首页").classList.add("select");else{if(/\/tags\/.*?\//.test(e)){var t=e.split("/")[2];document.querySelector("#category-bar")&&document.getElementById(t).classList.add("select")}}}function percent(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100);n<=99||(n=99),document.querySelector("#percent").innerHTML=n}function postAddToc(){let e=document.querySelector("#post>#article-container.post-content"),t=document.getElementById("card-toc");if(e&&t){let e=t.getElementsByClassName("toc-number"),n=t.getElementsByClassName("toc-link");for(let t=0;t<n.length;t++)document.getElementById(decodeURIComponent(n[t].attributes.href.value).slice(1)).dataset.toc=e[t].innerText}}document.getElementById("post-comment")&&owoBig(),PublicSacrificeDay()&&document.getElementsByTagName("html")[0].setAttribute("style","filter:gray !important;filter:grayscale(100%);-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);"),window.onscroll=percent,tagsBarActive(),window.onscroll=percent,document.getElementById("page-name").innerText=document.title.split(" | 幽香乐容")[0],postAddToc();var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;result<=99||(result=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<result)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var yxlr={diffDate:function(e,t=!1){const n=new Date,o=new Date(e),l=n.getTime()-o.getTime(),c=36e5,a=24*c;let i;if(t){const e=l/a,t=l/c,n=l/6e4;i=l/2592e6>=1?o.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else i=parseInt(l/a);return i},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=yxlr.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){n.initEvent("input",!0,!0);var o=replaceAll(e,"\n","\n> ");t.value="> "+o+"\n\n",t.dispatchEvent(n);var l=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,l-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}};if(yxlr.changeTimeInEssay(),yxlr.reflashEssayWaterFall(),document.querySelector("#bber-talk"))var swiper=new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}});